<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0">
		<title>留言板</title>
		<link rel="stylesheet" href="res/layui/css/layui.css">
		<link rel="stylesheet" href="res/static/css/index.css">
	</head>

	<body>
		<!-- nav部分 -->
		<div class="nav">
			<div class="layui-container">
				<!-- logo -->
				<div class="nav-logo">
					<a href="index.html">
						<img src="https://i.loli.net/2020/04/16/mBv9hliHOgdGkIV.png" style="width: 200px" height="80px">
					</a>
				</div>
				<div class="nav-list">
					<button>
          <span></span><span></span><span></span>
        </button>
					<ul class="layui-nav" lay-filter="">
						<li class="layui-nav-item">
							<a href="index.html">首页</a>
						</li>
						<li class="layui-nav-item">
							<a href="grjs.html">个人介绍</a>
						</li>
						<li class="layui-nav-item">
							<a href="kysh.html">课余生活</a>
						</li>
						<li class="layui-nav-item">
							<a href="xx.html">学校</a>
						</li>
						<li class="layui-nav-item">
							<a href="zygh.html">职业规划</a>
						</li>
						<li class="layui-nav-item layui-this">
							<a href="lyb.html">留言板</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<!-- banner部分 -->
		<div class="banner lyb">
			<div class="title">
				<p>留言板</p>
				<p class="en">Contact Me</p>
			</div>
		</div>
		<!-- main部分 -->
		<div class="fname" style="text-align: center;">
			<label for="fullname" style="font-size: 20px;">Name:</label>
			<input type="text" id="fullname">
		</div>
		<div class="email" style="text-align: center;">
			<label for="email" style="font-size: 20px;">Email:</label>
			<input type="email" id="email">
		  </div>
		<div class="lyb1">
		<textarea id="memo" cols="60" rows="10"></textarea>
		<br>
		<input type="button" value="写入内容" onclick="saveStorage()" style="background-color: #4CAF50; /* Green */
		border: none;
		color: white;
		padding: 15px 32px;
		text-align: center;
		text-decoration: none;
		display: inline-block;
		font-size: 16px;"/>
		<input type="button" value="初始化" onclick="clearStorage()" style="background-color: #4CAF50; /* Green */
		border: none;
		color: white;
		padding: 15px 32px;
		text-align: center;
		text-decoration: none;
		display: inline-block;
		font-size: 16px;"/>
		<hr />
		<textarea id="msg" cols="60" rows="10" readonly="readonly"></textarea>
		<script type="text/javascript">
			function saveStorage() {
				//var info = document.getElementById("memo");
				var Lstorage=window.localStorage;
				//判断对象中是否有muBorad这个键
				if(Lstorage.myBoard)
				{
					var date = new Date();
					if(memo.value=="")
					{
						alert("请先输入留言")
					}
					//获取原先键所对应的值，再加上文本框中输入的信息
					else{
						Lstorage.myBoard+= fullname.value+"————"+email.value+"\n"+memo.value +"\n"+date.toLocaleString()+"\n";
						loadStorage();
						alert("发表成功");
					}
					
				}
				else{
					var date = new Date();
					if(memo.value=="")
					{
						alert("请先输入留言")
					}
					else{
						Lstorage.myBoard="";
					//获取原先键所对应的值，再加上文本框中输入的信息
					Lstorage.myBoard+= fullname.value+"--"+email.value+"\n"+memo.value +"\n"+date.toLocaleString()+"\n";
					loadStorage();
					alert("发表成功");
					}
				}
				
			}
			function ClearTextarea()
			{
				document.getElementById("memo").value="";
				document.getElementById("fullname").value="";
				document.getElementById("email").value="";
			}
			function loadStorage() {
				var Lstorage=window.localStorage;
				var show =document.getElementById("msg");
				if(window.localStorage.myBoard)
				{
					show.value=window.localStorage.getItem("myBoard");
				}
				else
				{
					msg.value="暂无留言";
				}
					
				ClearTextarea();
			}
			function clearStorage() {
				var password=prompt("请输入管理员密码：","");
				if(password==null||password=="")
				{
					
				}
				else if(password!="123456")
				{
					alert("密码错误！")
				}
				else if(password=="123456")
				{
					window.localStorage.removeItem("myBoard");
					loadStorage();
					alert("已清空！")
				}		
			}
			loadStorage();
		</script>
		</div>
		<div class="footer">
			<div class="layui-container">
			  <p class="footer-web">
				<a href="http://www.ccyl.org.cn/" target="blink">共青团中央</a>
				<a href="http://i.mooc.chaoxing.com/" target="blink">超星学习通</a>
				<a href="http://www.cqjtu.edu.cn/" target="blink">重庆交通大学</a>
			  </p>
			  <div class="layui-row footer-contact">
				<div class="layui-col-sm10 layui-col-lg11">
				  <div class="layui-row">
					<div class="layui-col-sm6 layui-col-md4 layui-col-lg3">
					  <p class="contact-top"><span class="right" >重庆市万州区</span></p>
					  <p class="contact-bottom"><span class="right" >Copyright&nbsp;©&nbsp;2020 Ouch</span></p>
					</div>
				  </div>
				</div>
			  </div>
			</div>
		  </div>
		<script src="res/layui/layui.js"></script>
		<!--[if lt IE 9]>
  <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
  <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
		<script>
			layui.config({
				base: 'res/static/js/'
			}).use('firm');
		</script>
	</body>

</html>
